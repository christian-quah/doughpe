<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://source.unsplash.com/1600x900/?bake);">
  <div class="container">
    <h1>Fresh bakes - from homebaker to my home</h1>
    <p>Support local today</p>
    <form novalidate="novalidate" class="simple_form search" action="/" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
      <div class="search-form-control form-group">
        <input class="form-control string required" type="text" name="query" id="search_query" value="<%= params[:query] %>"/>
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-search"></i> Search
        </button>
      </div>
    </form>
  </div>
</div>

<% unless @query.nil? %>
  <div class="container mt-3">
    <h2>Showing results for "<%= @query %>"</h2>
    <% unless @bakers_results.nil? %>
      <h6><%= @bakers_results.length %> bakers</h6>
      <div class="scrollmenu mb-3 d-flex">
        <% @bakers_results.each do |baker| %>
          <%= link_to baker_path(baker.username) do %>
            <div class="avatar-container">
              <% if baker.photo.attached? %>
                <%= cl_image_tag baker.photo.key, class: "avatar-bordered-huge m-3" %>
              <% else %>
                <img class="avatar-bordered-huge m-3" src="https://source.unsplash.com/400x400/?bake" alt="product image">
              <% end %>
              <h6><%= baker.username %></h6>
            </div>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

  <% unless @products_results.nil? %>
    <div class="container mt-3">
      <h6><%= @products_results.length %> products</h6>
      <div class="scrollmenu mb-3">
        <% @products_results.each do |product| %>
          <div class="card m-3">
            <%= link_to baker_path(product.user.username) do %>
              <% if product.photo.attached? %>
                <%= cl_image_tag product.photo.key, height: 150, width: 200, crop: :fill, class: "card-img-top" %>
              <% else %>
                <img class="card-img-top" src="https://www.biggerbolderbaking.com/wp-content/uploads/2018/03/No-Bake-Chocolate-Chip-Cookies1.jpg" alt="product image">
              <% end %>
              <div class="card-body">
                <div class="card-title"><%= product.name %></div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>


<div class="container mt-3">
  <h2>Featured bakers</h2>
  <div class="scrollmenu mb-3 d-flex">
    <% @bakers.each do |baker| %>
      <%= link_to baker_path(baker.username) do %>
        <div class="avatar-container">
          <% if baker.photo.attached? %>
            <%= cl_image_tag baker.photo.key, height: 150, width: 200, crop: :fill, class: "avatar-bordered-huge m-3" %>
          <% else %>
            <img class="avatar-bordered-huge m-3" src="https://source.unsplash.com/400x400/?bake" alt="product image">
          <% end %>
          <h6><%= baker.username %></h6>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<div class="container mt-3">
  <h2>Popular bakes</h2>
  <div class="scrollmenu mb-3">
    <% @products.each do |product| %>
      <div class="card m-3" style="width: 18rem;">
        <%= link_to baker_path(product.user.username) do %>
          <% if product.photo.attached? %>
            <%= cl_image_tag product.photo.key, class: "card-img-top" %>
          <% else %>
            <img class="card-img-top" src="https://www.biggerbolderbaking.com/wp-content/uploads/2018/03/No-Bake-Chocolate-Chip-Cookies1.jpg" alt="product image" style="height: 0px, width:200px">
          <% end %>
          <div class="card-body">
            <div class="card-title"><%= product.name %></div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
